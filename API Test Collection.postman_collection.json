{
	"info": {
		"_postman_id": "ba8d8563-f592-43bd-8d4a-e1a788420e88",
		"name": "API Test Collection",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "13120741"
	},
	"item": [
		{
			"name": "Task List",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"HTTP Status Test\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"let schema = {",
							"  \"type\": \"object\",",
							"  \"properties\": {",
							"    \"has_data\": {",
							"      \"type\": \"boolean\"",
							"    },",
							"    \"data\": {",
							"      \"type\": \"object\",",
							"      \"properties\": {",
							"        \"items\": {",
							"          \"type\": \"array\",",
							"          \"items\": [",
							"            {",
							"              \"type\": \"object\",",
							"              \"properties\": {",
							"                \"id\": {",
							"                  \"type\": \"integer\"",
							"                },",
							"                \"name\": {",
							"                  \"type\": [\"string\",\"null\"]",
							"                },",
							"                \"region\": {",
							"                  \"type\": \"object\",",
							"                  \"properties\": {",
							"                    \"id\": {",
							"                      \"type\": \"integer\"",
							"                    },",
							"                    \"name\": {",
							"                      \"type\": \"string\"",
							"                    }",
							"                  },",
							"                  \"required\": [",
							"                    \"id\",",
							"                    \"name\"",
							"                  ]",
							"                },",
							"                \"database\": {",
							"                  \"type\": \"object\",",
							"                  \"properties\": {",
							"                    \"id\": {",
							"                      \"type\": \"integer\"",
							"                    },",
							"                    \"name\": {",
							"                      \"type\": [\"string\", \"null\"]",
							"                    },",
							"                    \"label\": {",
							"                      \"type\": \"string\"",
							"                    }",
							"                  },",
							"                  \"required\": [",
							"                    \"id\",",
							"                    \"name\",",
							"                    \"label\"",
							"                  ]",
							"                },",
							"                \"config\": {",
							"                  \"type\": \"object\",",
							"                  \"properties\": {",
							"                    \"types\": {",
							"                      \"type\": \"array\",",
							"                      \"items\": [",
							"                        {",
							"                          \"type\": \"object\",",
							"                          \"properties\": {",
							"                            \"id\": {",
							"                              \"type\": \"integer\"",
							"                            },",
							"                            \"label\": {",
							"                              \"type\": \"string\"",
							"                            },",
							"                            \"enabled\": {",
							"                              \"type\": \"boolean\"",
							"                            }",
							"                          },",
							"                          \"required\": [",
							"                            \"id\",",
							"                            \"label\",",
							"                            \"enabled\"",
							"                          ]",
							"                        },",
							"                        {",
							"                          \"type\": \"object\",",
							"                          \"properties\": {",
							"                            \"id\": {",
							"                              \"type\": \"integer\"",
							"                            },",
							"                            \"label\": {",
							"                              \"type\": \"string\"",
							"                            },",
							"                            \"enabled\": {",
							"                              \"type\": \"boolean\"",
							"                            }",
							"                          },",
							"                          \"required\": [",
							"                            \"id\",",
							"                            \"label\",",
							"                            \"enabled\"",
							"                          ]",
							"                        },",
							"                        {",
							"                          \"type\": \"object\",",
							"                          \"properties\": {",
							"                            \"id\": {",
							"                              \"type\": \"integer\"",
							"                            },",
							"                            \"label\": {",
							"                              \"type\": \"string\"",
							"                            },",
							"                            \"enabled\": {",
							"                              \"type\": \"boolean\"",
							"                            }",
							"                          },",
							"                          \"required\": [",
							"                            \"id\",",
							"                            \"label\",",
							"                            \"enabled\"",
							"                          ]",
							"                        },",
							"                        {",
							"                          \"type\": \"object\",",
							"                          \"properties\": {",
							"                            \"id\": {",
							"                              \"type\": \"integer\"",
							"                            },",
							"                            \"label\": {",
							"                              \"type\": \"string\"",
							"                            },",
							"                            \"enabled\": {",
							"                              \"type\": \"boolean\"",
							"                            }",
							"                          },",
							"                          \"required\": [",
							"                            \"id\",",
							"                            \"label\",",
							"                            \"enabled\"",
							"                          ]",
							"                        },",
							"                        {",
							"                          \"type\": \"object\",",
							"                          \"properties\": {",
							"                            \"id\": {",
							"                              \"type\": \"integer\"",
							"                            },",
							"                            \"label\": {",
							"                              \"type\": \"string\"",
							"                            },",
							"                            \"enabled\": {",
							"                              \"type\": \"boolean\"",
							"                            }",
							"                          },",
							"                          \"required\": [",
							"                            \"id\",",
							"                            \"label\",",
							"                            \"enabled\"",
							"                          ]",
							"                        },",
							"                        {",
							"                          \"type\": \"object\",",
							"                          \"properties\": {",
							"                            \"id\": {",
							"                              \"type\": \"integer\"",
							"                            },",
							"                            \"label\": {",
							"                              \"type\": \"string\"",
							"                            },",
							"                            \"enabled\": {",
							"                              \"type\": \"boolean\"",
							"                            }",
							"                          },",
							"                          \"required\": [",
							"                            \"id\",",
							"                            \"label\",",
							"                            \"enabled\"",
							"                          ]",
							"                        },",
							"                        {",
							"                          \"type\": \"object\",",
							"                          \"properties\": {",
							"                            \"id\": {",
							"                              \"type\": \"integer\"",
							"                            },",
							"                            \"label\": {",
							"                              \"type\": \"string\"",
							"                            },",
							"                            \"enabled\": {",
							"                              \"type\": \"boolean\"",
							"                            }",
							"                          },",
							"                          \"required\": [",
							"                            \"id\",",
							"                            \"label\",",
							"                            \"enabled\"",
							"                          ]",
							"                        }",
							"                      ]",
							"                    },",
							"                    \"template_id\": {",
							"                      \"type\": \"integer\"",
							"                    },",
							"                    \"source_id\": {",
							"                      \"type\": \"integer\"",
							"                    }",
							"                  },",
							"                  \"required\": [",
							"                    \"types\",",
							"                    \"template_id\",",
							"                    \"source_id\"",
							"                  ]",
							"                },",
							"                \"statistics\": {",
							"                  \"type\": \"object\",",
							"                  \"properties\": {",
							"                    \"cron\": {",
							"                      \"type\": \"object\",",
							"                      \"properties\": {",
							"                        \"count\": {",
							"                          \"type\": \"integer\"",
							"                        },",
							"                        \"finished\": {",
							"                          \"type\": \"integer\"",
							"                        }",
							"                      },",
							"                      \"required\": [",
							"                        \"count\",",
							"                        \"finished\"",
							"                      ]",
							"                    },",
							"                    \"queries\": {",
							"                      \"type\": \"object\",",
							"                      \"properties\": {",
							"                        \"count\": {",
							"                          \"type\": \"integer\"",
							"                        },",
							"                        \"finished\": {",
							"                          \"type\": \"integer\"",
							"                        }",
							"                      },",
							"                      \"required\": [",
							"                        \"count\",",
							"                        \"finished\"",
							"                      ]",
							"                    }",
							"                  },",
							"                  \"required\": [",
							"                    \"cron\",",
							"                    \"queries\"",
							"                  ]",
							"                },",
							"                \"properties\": {",
							"                  \"type\": \"object\",",
							"                  \"properties\": {",
							"                    \"file_id\": {",
							"                      \"type\": \"integer\"",
							"                    },",
							"                    \"multi\": {",
							"                      \"type\": \"boolean\"",
							"                    },",
							"                    \"queue_status\": {",
							"                      \"type\": \"integer\"",
							"                    },",
							"                    \"parsed\": {",
							"                      \"type\": \"integer\"",
							"                    },",
							"                    \"system_id\": {",
							"                      \"type\": \"integer\"",
							"                    },",
							"                    \"expected_count\": {",
							"                      \"type\": \"integer\"",
							"                    }",
							"                  },",
							"                  \"required\": [",
							"                    \"file_id\",",
							"                    \"multi\",",
							"                    \"queue_status\",",
							"                    \"parsed\",",
							"                    \"system_id\",",
							"                    \"expected_count\"",
							"                  ]",
							"                },",
							"                \"author\": {",
							"                  \"type\": \"object\",",
							"                  \"properties\": {",
							"                    \"id\": {",
							"                      \"type\": \"integer\"",
							"                    },",
							"                    \"username\": {",
							"                      \"type\": \"string\"",
							"                    },",
							"                    \"name\": {",
							"                      \"type\": \"string\"",
							"                    },",
							"                    \"surname\": {",
							"                      \"type\": \"string\"",
							"                    }",
							"                  },",
							"                  \"required\": [",
							"                    \"id\",",
							"                    \"username\",",
							"                    \"name\",",
							"                    \"surname\"",
							"                  ]",
							"                },",
							"                \"created_at\": {",
							"                  \"type\": \"integer\"",
							"                },",
							"                \"updated_at\": {",
							"                  \"type\": \"integer\"",
							"                }",
							"              },",
							"              \"required\": [",
							"                \"id\",",
							"                \"name\",",
							"                \"region\",",
							"                \"database\",",
							"                \"config\",",
							"                \"statistics\",",
							"                \"properties\",",
							"                \"author\",",
							"                \"created_at\",",
							"                \"updated_at\"",
							"              ]",
							"            }",
							"          ]",
							"        },",
							"        \"total\": {",
							"          \"type\": \"integer\"",
							"        },",
							"        \"per_page\": {",
							"          \"type\": \"integer\"",
							"        },",
							"        \"limit\": {",
							"          \"type\": \"integer\"",
							"        },",
							"        \"count\": {",
							"          \"type\": \"integer\"",
							"        },",
							"        \"offset\": {",
							"          \"type\": \"integer\"",
							"        },",
							"        \"has_more\": {",
							"          \"type\": \"boolean\"",
							"        }",
							"      },",
							"      \"required\": [",
							"        \"items\",",
							"        \"total\",",
							"        \"per_page\",",
							"        \"limit\",",
							"        \"count\",",
							"        \"offset\",",
							"        \"has_more\"",
							"      ]",
							"    },",
							"    \"version\": {",
							"      \"type\": \"null\"",
							"    },",
							"    \"status\": {",
							"      \"type\": \"integer\"",
							"    },",
							"    \"error\": {",
							"      \"type\": \"integer\"",
							"    },",
							"    \"error_messages\": {",
							"      \"type\": \"array\",",
							"      \"items\": {}",
							"    },",
							"    \"response_time\": {",
							"      \"type\": \"number\"",
							"    },",
							"    \"server_timestamp\": {",
							"      \"type\": \"string\"",
							"    },",
							"    \"server_unixtimestamp\": {",
							"      \"type\": \"integer\"",
							"    }",
							"  },",
							"  \"required\": [",
							"    \"has_data\",",
							"    \"data\",",
							"    \"version\",",
							"    \"status\",",
							"    \"error\",",
							"    \"error_messages\",",
							"    \"response_time\",",
							"    \"server_timestamp\",",
							"    \"server_unixtimestamp\"",
							"  ]",
							"}",
							"",
							"pm.test(\"Schema JSON Validation\", () => {",
							"    pm.response.to.have.jsonSchema(schema);",
							"}),",
							"",
							"pm.test(\"Response time is less than 2 mins\", function () {",
							"    pm.expect(pm.response.responseTime).to.be.below(120000);",
							"});",
							"",
							"let resp = JSON.parse(responseBody);",
							"",
							"// Get Array of all queries in all task ids",
							"let arr_cron_count = [];",
							"for (item of resp.data.items) {",
							"    arr_cron_count.push(item.statistics.cron.count);",
							"}",
							"console.log('Counted queries:', arr_cron_count)",
							"",
							"// Get Array of all finished queries in all task ids",
							"let arr_finished = [];",
							"for (item of resp.data.items) {",
							"    arr_finished.push(item.statistics.cron.finished);",
							"}",
							"console.log('Counted finished queries:', arr_finished)",
							"",
							"// If compared arrays eqls - tasks are not stopped/in progress",
							"pm.test(\"Checking stopped (in progress) tasks\", function () {",
							"    for (let i = 0; i < arr_finished.length; i++) {",
							"        let isEql = arr_finished[i] === arr_cron_count[i]",
							"        pm.expect(isEql).to.equal(true)",
							"    }",
							"})"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.collectionVariables.get(\"host_ru\");"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{host_ru}}api/v1/test/test/tasks?limit=10",
					"host": [
						"{{host_ru}}api"
					],
					"path": [
						"v1",
						"test",
						"test",
						"tasks"
					],
					"query": [
						{
							"key": "limit",
							"value": "10"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Task List MR",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"HTTP Status Test\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"var schema = {",
							"  \"type\": \"object\",",
							"  \"properties\": {",
							"    \"has_data\": {",
							"      \"type\": \"boolean\"",
							"    },",
							"    \"data\": {",
							"      \"type\": \"object\",",
							"      \"properties\": {",
							"        \"items\": {",
							"          \"type\": \"array\",",
							"          \"items\": [",
							"            {",
							"              \"type\": \"object\",",
							"              \"properties\": {",
							"                \"id\": {",
							"                  \"type\": \"integer\"",
							"                },",
							"                \"name\": {",
							"                  \"type\": [\"string\", \"integer\", \"number\"]",
							"                },",
							"                \"database\": {",
							"                  \"type\": \"object\",",
							"                  \"properties\": {",
							"                    \"id\": {",
							"                      \"type\": \"integer\"",
							"                    },",
							"                    \"name\": {",
							"                      \"type\": \"string\"",
							"                    },",
							"                    \"label\": {",
							"                      \"type\": \"string\"",
							"                    }",
							"                  },",
							"                  \"required\": [",
							"                    \"id\",",
							"                    \"name\",",
							"                    \"label\"",
							"                  ]",
							"                },",
							"                \"type\": {",
							"                  \"type\": \"object\",",
							"                  \"properties\": {",
							"                    \"id\": {",
							"                      \"type\": \"integer\"",
							"                    },",
							"                    \"label\": {",
							"                      \"type\": \"string\"",
							"                    }",
							"                  },",
							"                  \"required\": [",
							"                    \"id\",",
							"                    \"label\"",
							"                  ]",
							"                },",
							"                \"statistics\": {",
							"                  \"type\": \"object\",",
							"                  \"properties\": {",
							"                    \"cron\": {",
							"                      \"type\": \"object\",",
							"                      \"properties\": {",
							"                        \"count\": {",
							"                          \"type\": \"integer\"",
							"                        },",
							"                        \"finished\": {",
							"                          \"type\": \"integer\"",
							"                        }",
							"                      },",
							"                      \"required\": [",
							"                        \"count\",",
							"                        \"finished\"",
							"                      ]",
							"                    },",
							"                    \"queries\": {",
							"                      \"type\": \"object\",",
							"                      \"properties\": {",
							"                        \"count\": {",
							"                          \"type\": \"integer\"",
							"                        },",
							"                        \"finished\": {",
							"                          \"type\": \"integer\"",
							"                        }",
							"                      },",
							"                      \"required\": [",
							"                        \"count\",",
							"                        \"finished\"",
							"                      ]",
							"                    }",
							"                  },",
							"                  \"required\": [",
							"                    \"cron\",",
							"                    \"queries\"",
							"                  ]",
							"                },",
							"                \"properties\": {",
							"                  \"type\": \"object\",",
							"                  \"properties\": {",
							"                    \"file_id\": {",
							"                      \"type\": \"integer\"",
							"                    },",
							"                    \"queue_status\": {",
							"                      \"type\": \"integer\"",
							"                    },",
							"                    \"parsed\": {",
							"                      \"type\": \"integer\"",
							"                    },",
							"                    \"system_id\": {",
							"                      \"type\": \"integer\"",
							"                    }",
							"                  },",
							"                  \"required\": [",
							"                    \"file_id\",",
							"                    \"queue_status\",",
							"                    \"parsed\",",
							"                    \"system_id\"",
							"                  ]",
							"                },",
							"                \"author\": {",
							"                  \"type\": \"object\",",
							"                  \"properties\": {",
							"                    \"id\": {",
							"                      \"type\": \"integer\"",
							"                    },",
							"                    \"username\": {",
							"                      \"type\": \"string\"",
							"                    },",
							"                    \"name\": {",
							"                      \"type\": \"string\"",
							"                    },",
							"                    \"surname\": {",
							"                      \"type\": \"string\"",
							"                    }",
							"                  },",
							"                  \"required\": [",
							"                    \"id\",",
							"                    \"username\",",
							"                    \"name\",",
							"                    \"surname\"",
							"                  ]",
							"                },",
							"                \"created_at\": {",
							"                  \"type\": \"integer\"",
							"                },",
							"                \"updated_at\": {",
							"                  \"type\": \"integer\"",
							"                }",
							"              },",
							"              \"required\": [",
							"                \"id\",",
							"                \"name\",",
							"                \"database\",",
							"                \"type\",",
							"                \"statistics\",",
							"                \"properties\",",
							"                \"author\",",
							"                \"created_at\",",
							"                \"updated_at\"",
							"              ]",
							"            }",
							"          ]",
							"        },",
							"        \"total\": {",
							"          \"type\": \"integer\"",
							"        },",
							"        \"per_page\": {",
							"          \"type\": \"integer\"",
							"        },",
							"        \"limit\": {",
							"          \"type\": \"integer\"",
							"        },",
							"        \"count\": {",
							"          \"type\": \"integer\"",
							"        },",
							"        \"offset\": {",
							"          \"type\": \"integer\"",
							"        },",
							"        \"has_more\": {",
							"          \"type\": \"boolean\"",
							"        }",
							"      },",
							"      \"required\": [",
							"        \"items\",",
							"        \"total\",",
							"        \"per_page\",",
							"        \"limit\",",
							"        \"count\",",
							"        \"offset\",",
							"        \"has_more\"",
							"      ]",
							"    },",
							"    \"version\": {",
							"      \"type\": \"null\"",
							"    },",
							"    \"status\": {",
							"      \"type\": \"integer\"",
							"    },",
							"    \"error\": {",
							"      \"type\": \"integer\"",
							"    },",
							"    \"error_messages\": {",
							"      \"type\": \"array\",",
							"      \"items\": {}",
							"    },",
							"    \"response_time\": {",
							"      \"type\": \"number\"",
							"    },",
							"    \"server_timestamp\": {",
							"      \"type\": \"string\"",
							"    },",
							"    \"server_unixtimestamp\": {",
							"      \"type\": \"integer\"",
							"    }",
							"  },",
							"  \"required\": [",
							"    \"has_data\",",
							"    \"data\",",
							"    \"version\",",
							"    \"status\",",
							"    \"error\",",
							"    \"error_messages\",",
							"    \"response_time\",",
							"    \"server_timestamp\",",
							"    \"server_unixtimestamp\"",
							"  ]",
							"}",
							"",
							"pm.test(\"Schema JSON Validation\", () => {",
							"    pm.response.to.have.jsonSchema(schema);",
							"}),",
							"",
							"pm.test(\"Response time is less than 2 min\", function () {",
							"    pm.expect(pm.response.responseTime).to.be.below(120000);",
							"});",
							"",
							"var resp = JSON.parse(responseBody);",
							"",
							"// Get Array of all queries in all task ids",
							"let arr_cron_count = [];",
							"for (item of resp.data.items) {",
							"    arr_cron_count.push(item.statistics.cron.count);",
							"}",
							"console.log('Counted queries:', arr_cron_count)",
							"",
							"// Get Array of all finished queries in all task ids",
							"let arr_finished = [];",
							"for (item of resp.data.items) {",
							"    arr_finished.push(item.statistics.cron.finished);",
							"}",
							"console.log('Counted finished queries:', arr_finished)",
							"",
							"// If compared arrays eqls - tasks are not stopped/in progress",
							"pm.test(\"Checking stopped (in progress) tasks\", function () {",
							"    for (let i = 0; i < arr_finished.length; i++) {",
							"        let isEql = arr_finished[i] === arr_cron_count[i]",
							"        pm.expect(isEql).to.equal(true)",
							"    }",
							"})"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.collectionVariables.get(\"host_ru\");"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{host_ru}}api/v1/test/test/tasks/mr?limit=5",
					"host": [
						"{{host_ru}}api"
					],
					"path": [
						"v1",
						"test",
						"test",
						"tasks",
						"mr"
					],
					"query": [
						{
							"key": "limit",
							"value": "5"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Search by Task Name",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"HTTP Status Test\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"let schema = {\r",
							"  \"type\": \"object\",\r",
							"  \"properties\": {\r",
							"    \"has_data\": {\r",
							"      \"type\": \"boolean\"\r",
							"    },\r",
							"    \"data\": {\r",
							"      \"type\": \"object\",\r",
							"      \"properties\": {\r",
							"        \"items\": {\r",
							"          \"type\": \"array\",\r",
							"          \"items\": [\r",
							"            {\r",
							"              \"type\": \"object\",\r",
							"              \"properties\": {\r",
							"                \"id\": {\r",
							"                  \"type\": \"integer\"\r",
							"                },\r",
							"                \"name\": {\r",
							"                  \"type\": \"string\"\r",
							"                },\r",
							"                \"region\": {\r",
							"                  \"type\": \"object\",\r",
							"                  \"properties\": {\r",
							"                    \"id\": {\r",
							"                      \"type\": \"integer\"\r",
							"                    },\r",
							"                    \"name\": {\r",
							"                      \"type\": \"string\"\r",
							"                    }\r",
							"                  },\r",
							"                  \"required\": [\r",
							"                    \"id\",\r",
							"                    \"name\"\r",
							"                  ]\r",
							"                },\r",
							"                \"database\": {\r",
							"                  \"type\": \"object\",\r",
							"                  \"properties\": {\r",
							"                    \"id\": {\r",
							"                      \"type\": \"integer\"\r",
							"                    },\r",
							"                    \"name\": {\r",
							"                      \"type\": \"string\"\r",
							"                    },\r",
							"                    \"label\": {\r",
							"                      \"type\": \"string\"\r",
							"                    }\r",
							"                  },\r",
							"                  \"required\": [\r",
							"                    \"id\",\r",
							"                    \"name\",\r",
							"                    \"label\"\r",
							"                  ]\r",
							"                },\r",
							"                \"config\": {\r",
							"                  \"type\": \"object\",\r",
							"                  \"properties\": {\r",
							"                    \"types\": {\r",
							"                      \"type\": \"array\",\r",
							"                      \"items\": [\r",
							"                        {\r",
							"                          \"type\": \"object\",\r",
							"                          \"properties\": {\r",
							"                            \"id\": {\r",
							"                              \"type\": \"integer\"\r",
							"                            },\r",
							"                            \"label\": {\r",
							"                              \"type\": \"string\"\r",
							"                            },\r",
							"                            \"enabled\": {\r",
							"                              \"type\": \"boolean\"\r",
							"                            }\r",
							"                          },\r",
							"                          \"required\": [\r",
							"                            \"id\",\r",
							"                            \"label\",\r",
							"                            \"enabled\"\r",
							"                          ]\r",
							"                        },\r",
							"                        {\r",
							"                          \"type\": \"object\",\r",
							"                          \"properties\": {\r",
							"                            \"id\": {\r",
							"                              \"type\": \"integer\"\r",
							"                            },\r",
							"                            \"label\": {\r",
							"                              \"type\": \"string\"\r",
							"                            },\r",
							"                            \"enabled\": {\r",
							"                              \"type\": \"boolean\"\r",
							"                            }\r",
							"                          },\r",
							"                          \"required\": [\r",
							"                            \"id\",\r",
							"                            \"label\",\r",
							"                            \"enabled\"\r",
							"                          ]\r",
							"                        },\r",
							"                        {\r",
							"                          \"type\": \"object\",\r",
							"                          \"properties\": {\r",
							"                            \"id\": {\r",
							"                              \"type\": \"integer\"\r",
							"                            },\r",
							"                            \"label\": {\r",
							"                              \"type\": \"string\"\r",
							"                            },\r",
							"                            \"enabled\": {\r",
							"                              \"type\": \"boolean\"\r",
							"                            }\r",
							"                          },\r",
							"                          \"required\": [\r",
							"                            \"id\",\r",
							"                            \"label\",\r",
							"                            \"enabled\"\r",
							"                          ]\r",
							"                        },\r",
							"                        {\r",
							"                          \"type\": \"object\",\r",
							"                          \"properties\": {\r",
							"                            \"id\": {\r",
							"                              \"type\": \"integer\"\r",
							"                            },\r",
							"                            \"label\": {\r",
							"                              \"type\": \"string\"\r",
							"                            },\r",
							"                            \"enabled\": {\r",
							"                              \"type\": \"boolean\"\r",
							"                            }\r",
							"                          },\r",
							"                          \"required\": [\r",
							"                            \"id\",\r",
							"                            \"label\",\r",
							"                            \"enabled\"\r",
							"                          ]\r",
							"                        },\r",
							"                        {\r",
							"                          \"type\": \"object\",\r",
							"                          \"properties\": {\r",
							"                            \"id\": {\r",
							"                              \"type\": \"integer\"\r",
							"                            },\r",
							"                            \"label\": {\r",
							"                              \"type\": \"string\"\r",
							"                            },\r",
							"                            \"enabled\": {\r",
							"                              \"type\": \"boolean\"\r",
							"                            }\r",
							"                          },\r",
							"                          \"required\": [\r",
							"                            \"id\",\r",
							"                            \"label\",\r",
							"                            \"enabled\"\r",
							"                          ]\r",
							"                        },\r",
							"                        {\r",
							"                          \"type\": \"object\",\r",
							"                          \"properties\": {\r",
							"                            \"id\": {\r",
							"                              \"type\": \"integer\"\r",
							"                            },\r",
							"                            \"label\": {\r",
							"                              \"type\": \"string\"\r",
							"                            },\r",
							"                            \"enabled\": {\r",
							"                              \"type\": \"boolean\"\r",
							"                            }\r",
							"                          },\r",
							"                          \"required\": [\r",
							"                            \"id\",\r",
							"                            \"label\",\r",
							"                            \"enabled\"\r",
							"                          ]\r",
							"                        },\r",
							"                        {\r",
							"                          \"type\": \"object\",\r",
							"                          \"properties\": {\r",
							"                            \"id\": {\r",
							"                              \"type\": \"integer\"\r",
							"                            },\r",
							"                            \"label\": {\r",
							"                              \"type\": \"string\"\r",
							"                            },\r",
							"                            \"enabled\": {\r",
							"                              \"type\": \"boolean\"\r",
							"                            }\r",
							"                          },\r",
							"                          \"required\": [\r",
							"                            \"id\",\r",
							"                            \"label\",\r",
							"                            \"enabled\"\r",
							"                          ]\r",
							"                        }\r",
							"                      ]\r",
							"                    },\r",
							"                    \"template_id\": {\r",
							"                      \"type\": \"integer\"\r",
							"                    },\r",
							"                    \"source_id\": {\r",
							"                      \"type\": \"integer\"\r",
							"                    }\r",
							"                  },\r",
							"                  \"required\": [\r",
							"                    \"types\",\r",
							"                    \"template_id\",\r",
							"                    \"source_id\"\r",
							"                  ]\r",
							"                },\r",
							"                \"statistics\": {\r",
							"                  \"type\": \"object\",\r",
							"                  \"properties\": {\r",
							"                    \"cron\": {\r",
							"                      \"type\": \"object\",\r",
							"                      \"properties\": {\r",
							"                        \"count\": {\r",
							"                          \"type\": \"integer\"\r",
							"                        },\r",
							"                        \"finished\": {\r",
							"                          \"type\": \"integer\"\r",
							"                        }\r",
							"                      },\r",
							"                      \"required\": [\r",
							"                        \"count\",\r",
							"                        \"finished\"\r",
							"                      ]\r",
							"                    },\r",
							"                    \"queries\": {\r",
							"                      \"type\": \"object\",\r",
							"                      \"properties\": {\r",
							"                        \"count\": {\r",
							"                          \"type\": \"integer\"\r",
							"                        },\r",
							"                        \"finished\": {\r",
							"                          \"type\": \"integer\"\r",
							"                        }\r",
							"                      },\r",
							"                      \"required\": [\r",
							"                        \"count\",\r",
							"                        \"finished\"\r",
							"                      ]\r",
							"                    }\r",
							"                  },\r",
							"                  \"required\": [\r",
							"                    \"cron\",\r",
							"                    \"queries\"\r",
							"                  ]\r",
							"                },\r",
							"                \"properties\": {\r",
							"                  \"type\": \"object\",\r",
							"                  \"properties\": {\r",
							"                    \"file_id\": {\r",
							"                      \"type\": \"integer\"\r",
							"                    },\r",
							"                    \"multi\": {\r",
							"                      \"type\": \"boolean\"\r",
							"                    },\r",
							"                    \"queue_status\": {\r",
							"                      \"type\": \"integer\"\r",
							"                    },\r",
							"                    \"parsed\": {\r",
							"                      \"type\": \"integer\"\r",
							"                    },\r",
							"                    \"system_id\": {\r",
							"                      \"type\": \"integer\"\r",
							"                    },\r",
							"                    \"expected_count\": {\r",
							"                      \"type\": \"integer\"\r",
							"                    }\r",
							"                  },\r",
							"                  \"required\": [\r",
							"                    \"file_id\",\r",
							"                    \"multi\",\r",
							"                    \"queue_status\",\r",
							"                    \"parsed\",\r",
							"                    \"system_id\",\r",
							"                    \"expected_count\"\r",
							"                  ]\r",
							"                },\r",
							"                \"author\": {\r",
							"                  \"type\": \"object\",\r",
							"                  \"properties\": {\r",
							"                    \"id\": {\r",
							"                      \"type\": \"integer\"\r",
							"                    },\r",
							"                    \"username\": {\r",
							"                      \"type\": \"string\"\r",
							"                    },\r",
							"                    \"name\": {\r",
							"                      \"type\": \"string\"\r",
							"                    },\r",
							"                    \"surname\": {\r",
							"                      \"type\": \"string\"\r",
							"                    }\r",
							"                  },\r",
							"                  \"required\": [\r",
							"                    \"id\",\r",
							"                    \"username\",\r",
							"                    \"name\",\r",
							"                    \"surname\"\r",
							"                  ]\r",
							"                },\r",
							"                \"created_at\": {\r",
							"                  \"type\": \"integer\"\r",
							"                },\r",
							"                \"updated_at\": {\r",
							"                  \"type\": \"integer\"\r",
							"                }\r",
							"              },\r",
							"              \"required\": [\r",
							"                \"id\",\r",
							"                \"name\",\r",
							"                \"region\",\r",
							"                \"database\",\r",
							"                \"config\",\r",
							"                \"statistics\",\r",
							"                \"properties\",\r",
							"                \"author\",\r",
							"                \"created_at\",\r",
							"                \"updated_at\"\r",
							"              ]\r",
							"            }\r",
							"          ]\r",
							"        },\r",
							"        \"total\": {\r",
							"          \"type\": \"integer\"\r",
							"        },\r",
							"        \"per_page\": {\r",
							"          \"type\": \"integer\"\r",
							"        },\r",
							"        \"limit\": {\r",
							"          \"type\": \"integer\"\r",
							"        },\r",
							"        \"count\": {\r",
							"          \"type\": \"integer\"\r",
							"        },\r",
							"        \"offset\": {\r",
							"          \"type\": \"integer\"\r",
							"        },\r",
							"        \"has_more\": {\r",
							"          \"type\": \"boolean\"\r",
							"        }\r",
							"      },\r",
							"      \"required\": [\r",
							"        \"items\",\r",
							"        \"total\",\r",
							"        \"per_page\",\r",
							"        \"limit\",\r",
							"        \"count\",\r",
							"        \"offset\",\r",
							"        \"has_more\"\r",
							"      ]\r",
							"    },\r",
							"    \"version\": {\r",
							"      \"type\": \"null\"\r",
							"    },\r",
							"    \"status\": {\r",
							"      \"type\": \"integer\"\r",
							"    },\r",
							"    \"error\": {\r",
							"      \"type\": \"integer\"\r",
							"    },\r",
							"    \"error_messages\": {\r",
							"      \"type\": \"array\",\r",
							"      \"items\": {}\r",
							"    },\r",
							"    \"response_time\": {\r",
							"      \"type\": \"number\"\r",
							"    },\r",
							"    \"server_timestamp\": {\r",
							"      \"type\": \"string\"\r",
							"    },\r",
							"    \"server_unixtimestamp\": {\r",
							"      \"type\": \"integer\"\r",
							"    }\r",
							"  },\r",
							"  \"required\": [\r",
							"    \"has_data\",\r",
							"    \"data\",\r",
							"    \"version\",\r",
							"    \"status\",\r",
							"    \"error\",\r",
							"    \"error_messages\",\r",
							"    \"response_time\",\r",
							"    \"server_timestamp\",\r",
							"    \"server_unixtimestamp\"\r",
							"  ]\r",
							"}\r",
							"\r",
							"pm.test(\"Schema JSON Task Name Validation\", () => {\r",
							"    pm.response.to.have.jsonSchema(schema);\r",
							"}),\r",
							"\r",
							"pm.test(\"Response time is less than 2 min\", function () {\r",
							"    pm.expect(pm.response.responseTime).to.be.below(120000);\r",
							"});\r",
							"\r",
							"let responseObject = JSON.parse(responseBody);\r",
							"let name_task = responseObject.data.items[0].name\r",
							"console.log('Name of the task in WS:', name_task)\r",
							"\r",
							"pm.test(\"Name Contains in response\", function () { \r",
							"    pm.expect(name_task).to.be.a('string');\r",
							"    pm.expect(name_task).to.be.eql(pm.collectionVariables.get(\"q_name\"));\r",
							"})"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.collectionVariables.get(\"host_ru\");\r",
							"pm.collectionVariables.get(\"q_name\");"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{host_ru}}api/v1/test/test/tasks?limit=100&q={{q_name}}",
					"host": [
						"{{host_ru}}api"
					],
					"path": [
						"v1",
						"test",
						"test",
						"tasks"
					],
					"query": [
						{
							"key": "limit",
							"value": "100"
						},
						{
							"key": "q",
							"value": "{{q_name}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Find Task",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.collectionVariables.get(\"host_ru\");\r",
							"pm.collectionVariables.get(\"ws_name\");"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"HTTP Status Test\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response time is less than 2 min\", function () {",
							"    pm.expect(pm.response.responseTime).to.be.below(120000);",
							"});",
							"",
							"let responseObject = JSON.parse(responseBody);",
							"let name_task = responseObject.data.items[0].name",
							"console.log('Founded name of the task in WS:', name_task)",
							"",
							"pm.test(\"Name Contains in response\", function () { ",
							"    pm.expect(name_task).to.be.a('string');",
							"    pm.expect(name_task).to.eql(pm.collectionVariables.get('ws_name'))",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{host_ru}}api/v1/test/test/tasks?limit=100&q={{ws_name}}",
					"host": [
						"{{host_ru}}api"
					],
					"path": [
						"v1",
						"test",
						"test",
						"tasks"
					],
					"query": [
						{
							"key": "limit",
							"value": "100"
						},
						{
							"key": "q",
							"value": "{{ws_name}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Databases",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"HTTP Status Test 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"let schema = {",
							"  \"type\": \"object\",",
							"  \"properties\": {",
							"    \"has_data\": {",
							"      \"type\": \"boolean\"",
							"    },",
							"    \"data\": {",
							"      \"type\": \"object\",",
							"      \"properties\": {",
							"        \"items\": {",
							"          \"type\": \"array\",",
							"          \"items\": [",
							"            {",
							"              \"type\": \"object\",",
							"              \"properties\": {",
							"                \"id\": {",
							"                  \"type\": \"integer\"",
							"                },",
							"                \"label\": {",
							"                  \"type\": \"string\"",
							"                }",
							"              },",
							"              \"required\": [",
							"                \"id\",",
							"                \"label\"",
							"              ]",
							"            },",
							"            {",
							"              \"type\": \"object\",",
							"              \"properties\": {",
							"                \"id\": {",
							"                  \"type\": \"integer\"",
							"                },",
							"                \"label\": {",
							"                  \"type\": \"string\"",
							"                }",
							"              },",
							"              \"required\": [",
							"                \"id\",",
							"                \"label\"",
							"              ]",
							"            },",
							"            {",
							"              \"type\": \"object\",",
							"              \"properties\": {",
							"                \"id\": {",
							"                  \"type\": \"integer\"",
							"                },",
							"                \"label\": {",
							"                  \"type\": \"string\"",
							"                }",
							"              },",
							"              \"required\": [",
							"                \"id\",",
							"                \"label\"",
							"              ]",
							"            },",
							"            {",
							"              \"type\": \"object\",",
							"              \"properties\": {",
							"                \"id\": {",
							"                  \"type\": \"integer\"",
							"                },",
							"                \"label\": {",
							"                  \"type\": \"string\"",
							"                }",
							"              },",
							"              \"required\": [",
							"                \"id\",",
							"                \"label\"",
							"              ]",
							"            },",
							"            {",
							"              \"type\": \"object\",",
							"              \"properties\": {",
							"                \"id\": {",
							"                  \"type\": \"integer\"",
							"                },",
							"                \"label\": {",
							"                  \"type\": \"string\"",
							"                }",
							"              },",
							"              \"required\": [",
							"                \"id\",",
							"                \"label\"",
							"              ]",
							"            }",
							"          ]",
							"        }",
							"      },",
							"      \"required\": [",
							"        \"items\"",
							"      ]",
							"    },",
							"    \"version\": {",
							"      \"type\": \"null\"",
							"    },",
							"    \"status\": {",
							"      \"type\": \"integer\"",
							"    },",
							"    \"error\": {",
							"      \"type\": \"integer\"",
							"    },",
							"    \"error_messages\": {",
							"      \"type\": \"array\",",
							"      \"items\": {}",
							"    },",
							"    \"response_time\": {",
							"      \"type\": \"number\"",
							"    },",
							"    \"server_timestamp\": {",
							"      \"type\": \"string\"",
							"    },",
							"    \"server_unixtimestamp\": {",
							"      \"type\": \"integer\"",
							"    }",
							"  },",
							"  \"required\": [",
							"    \"has_data\",",
							"    \"data\",",
							"    \"version\",",
							"    \"status\",",
							"    \"error\",",
							"    \"error_messages\",",
							"    \"response_time\",",
							"    \"server_timestamp\",",
							"    \"server_unixtimestamp\"",
							"  ]",
							"}",
							"",
							"pm.test(\"Schema JSON Databases Validation\", () => {",
							"    pm.response.to.have.jsonSchema(schema);",
							"}),",
							"",
							"pm.test(\"Response time is less than 2 min\", function () {",
							"    pm.expect(pm.response.responseTime).to.be.below(120000);",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.collectionVariables.get(\"host_ru\");"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{host_ru}}api/v1/test/ru/test/databases",
					"host": [
						"{{host_ru}}api"
					],
					"path": [
						"v1",
						"test",
						"ru",
						"test",
						"databases"
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{TOKEN}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// POST request for auth",
					"var request = {",
					"  \"url\": \"https://test.ru/api/v1/auth\",",
					"  \"method\": \"POST\",",
					"  \"headers\": {",
					"    \"Content-Type\": \"application/json\"",
					"  },",
					"  \"body\": JSON.stringify({",
					"    \"login\": \"login\",",
					"    \"password\": \"password\"",
					"  }),",
					"};",
					"",
					"// Set collection token",
					"pm.sendRequest(request, (err, res) => {",
					"    var result = res.json();",
					"        pm.collectionVariables.set('TOKEN', result.data.access_token);",
					"}); ",
					"",
					"// Data for collection",
					"pm.collectionVariables.set(\"host_ru\", \"https://test.ru/\");",
					"pm.collectionVariables.set(\"q_name\", \"орехи спб\")",
					"pm.collectionVariables.set(\"ws_name\", \"postman test\")"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "ws_name",
			"value": "postman test"
		},
		{
			"key": "q_name",
			"value": "орехи спб"
		},
		{
			"key": "TOKEN",
			"value": "",
			"type": "string"
		},
		{
			"key": "host_ru",
			"value": "https://test.ru/",
			"type": "string"
		}
	]
}